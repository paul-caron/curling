\doxysection{curling.\+hpp}
\hypertarget{curling_8hpp_source}{}\label{curling_8hpp_source}\index{include/curling.hpp@{include/curling.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ (c)\ 2025\ Paul\ Caron}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ Curling\ -\/\ a\ modern\ C++\ wrapper\ for\ libcurl.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ Licensed\ under\ the\ MIT\ License.\ You\ may\ obtain\ a\ copy\ of\ the\ license\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ https://opensource.org/licenses/MIT}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#include\ <cctype>}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#include\ <curl/curl.h>}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecurling}{curling}}\ \{}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ version\_major\ =\ 1;}
\DoxyCodeLine{00082\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ version\_minor\ =\ 1;}
\DoxyCodeLine{00083\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ version\_patch\ =\ 0;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{inline}\ std::string\ version()\ \{}
\DoxyCodeLine{00086\ \ \ \ \ std::ostringstream\ oss;}
\DoxyCodeLine{00087\ \ \ \ \ oss\ <<\ version\_major\ <<\ \textcolor{charliteral}{'.'}\ <<\ version\_minor\ <<\ \textcolor{charliteral}{'.'}\ <<\ version\_patch;}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}\ oss.str();}
\DoxyCodeLine{00089\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00095\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{keyword}{inline}\ std::once\_flag\ curlGlobalInitFlag;}
\DoxyCodeLine{00098\ \textcolor{keyword}{inline}\ std::mutex\ curlGlobalMutex;}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ instanceCount\ =\ 0;}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ ensureCurlGlobalInit()\{}
\DoxyCodeLine{00103\ \ \ \ \ std::call\_once(curlGlobalInitFlag,\ []\{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ curl\_global\_init(CURL\_GLOBAL\_DEFAULT);}
\DoxyCodeLine{00105\ \ \ \ \ \});}
\DoxyCodeLine{00106\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(curlGlobalMutex);}
\DoxyCodeLine{00107\ \ \ \ \ ++instanceCount;}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ maybeCleanupGlobalCurl()\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00111\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(curlGlobalMutex);}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{if}(-\/-\/instanceCount==0)\{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ curl\_global\_cleanup();}
\DoxyCodeLine{00114\ \ \ \ \ \}}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ trim(std::string\&\ s)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ s.erase(s.begin(),\ std::find\_if(s.begin(),\ s.end(),\ [](\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ ch)\{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ return\ !std::isspace(ch);}
\DoxyCodeLine{00120\ \ \ \ \ \}));}
\DoxyCodeLine{00121\ \ \ \ \ s.erase(std::find\_if(s.rbegin(),\ s.rend(),\ [](\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ ch)\{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ return\ !std::isspace(ch);}
\DoxyCodeLine{00123\ \ \ \ \ \}).base(),\ s.end());}
\DoxyCodeLine{00124\ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ toLowerCase(std::string\&\ s)\ \{}
\DoxyCodeLine{00127\ \ \ \ \ std::transform(s.begin(),\ s.end(),\ s.begin(),}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ c)\ \{\ return\ std::tolower(c);\ \});}
\DoxyCodeLine{00129\ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ WriteCallback(\textcolor{keywordtype}{void}*\ contents,\ \textcolor{keywordtype}{size\_t}\ size,\ \textcolor{keywordtype}{size\_t}\ nmemb,\ \textcolor{keywordtype}{void}*\ userp)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{auto}\ responseStream\ =\ \textcolor{keyword}{static\_cast<}std::ostringstream*\textcolor{keyword}{>}(userp);}
\DoxyCodeLine{00134\ \ \ \ \ responseStream-\/>write(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(contents),\ size\ *\ nmemb);}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{return}\ size\ *\ nmemb;}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ HeaderCallback(\textcolor{keywordtype}{char}*\ buffer,\ \textcolor{keywordtype}{size\_t}\ size,\ \textcolor{keywordtype}{size\_t}\ nitems,\ \textcolor{keywordtype}{void}*\ userdata)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{auto}*\ headerMap\ =\ \textcolor{keyword}{static\_cast<}std::map<std::string,\ std::vector<std::string>\textcolor{keyword}{>}*>(userdata);}
\DoxyCodeLine{00140\ \ \ \ \ std::string\ headerLine(buffer,\ size\ *\ nitems);}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordflow}{if}\ (headerLine.empty())\ \textcolor{keywordflow}{return}\ 0;\ \textcolor{comment}{//\ skip\ the\ separation\ line}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keyword}{auto}\ colonPos\ =\ headerLine.find(\textcolor{stringliteral}{"{}:"{}});}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{if}\ (colonPos\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ std::string\ key\ =\ headerLine.substr(0,\ colonPos);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ std::string\ value\ =\ headerLine.substr(colonPos\ +\ 1);}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ detail::trim(key);}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ detail::trim(value);}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ detail::toLowerCase(key);}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ (*headerMap)[key].push\_back(value);}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordflow}{return}\ size\ *\ nitems;}
\DoxyCodeLine{00155\ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ ProgressCallbackBridge(\textcolor{keywordtype}{void}*\ clientp,\ curl\_off\_t\ dltotal,\ curl\_off\_t\ dlnow,}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curl\_off\_t\ ultotal,\ curl\_off\_t\ ulnow);}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \}\textcolor{comment}{//detail\ end}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00167\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}\ :\ \textcolor{keyword}{public}\ std::runtime\_error\ \{}
\DoxyCodeLine{00168\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}(\textcolor{keyword}{const}\ std::string\&\ msg)\ :\ std::runtime\_error(msg)\ \{\}}
\DoxyCodeLine{00170\ \};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00175\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1InitializationException}{InitializationException}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}\ \{}
\DoxyCodeLine{00176\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcurling_1_1InitializationException}{InitializationException}}(\textcolor{keyword}{const}\ std::string\&\ msg)\ :\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}(msg)\ \{\}}
\DoxyCodeLine{00178\ \};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00183\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1RequestException}{RequestException}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}\ \{}
\DoxyCodeLine{00184\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcurling_1_1RequestException}{RequestException}}(\textcolor{keyword}{const}\ std::string\&\ msg)\ :\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}(msg)\ \{\}}
\DoxyCodeLine{00186\ \};}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00191\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1HeaderException}{HeaderException}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}\ \{}
\DoxyCodeLine{00192\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcurling_1_1HeaderException}{HeaderException}}(\textcolor{keyword}{const}\ std::string\&\ msg)\ :\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}(msg)\ \{\}}
\DoxyCodeLine{00194\ \};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00199\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1MimeException}{MimeException}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}\ \{}
\DoxyCodeLine{00200\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcurling_1_1MimeException}{MimeException}}(\textcolor{keyword}{const}\ std::string\&\ msg)\ :\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}(msg)\ \{\}}
\DoxyCodeLine{00202\ \};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00207\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1LogicException}{LogicException}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}\ \{}
\DoxyCodeLine{00208\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcurling_1_1LogicException}{LogicException}}(\textcolor{keyword}{const}\ std::string\&\ msg)\ :\ \mbox{\hyperlink{classcurling_1_1CurlingException}{CurlingException}}(msg)\ \{\}}
\DoxyCodeLine{00210\ \};}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00213\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcurling_1_1CurlHandleDeleter}{CurlHandleDeleter}}\ \{\ \textcolor{keywordtype}{void}\ operator()(CURL*\ h)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{if}\ (h)\ curl\_easy\_cleanup(h);\ \}\};}
\DoxyCodeLine{00214\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcurling_1_1CurlSlistDeleter}{CurlSlistDeleter}}\ \{\ \textcolor{keywordtype}{void}\ operator()(curl\_slist*\ l)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{if}\ (l)\ curl\_slist\_free\_all(l);\ \}\};}
\DoxyCodeLine{00215\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcurling_1_1CurlMimeDeleter}{CurlMimeDeleter}}\ \{\ \textcolor{keywordtype}{void}\ operator()(curl\_mime*\ m)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{if}\ (m)\ curl\_mime\_free(m);\ \}\};}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \textcolor{keyword}{using\ }CurlPtr\ =\ std::unique\_ptr<CURL,\ CurlHandleDeleter>;}
\DoxyCodeLine{00218\ \textcolor{keyword}{using\ }CurlSlistPtr\ =\ std::unique\_ptr<curl\_slist,\ CurlSlistDeleter>;}
\DoxyCodeLine{00219\ \textcolor{keyword}{using\ }CurlMimePtr\ =\ std::unique\_ptr<curl\_mime,\ CurlMimeDeleter>;}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00227\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcurling_1_1Response}{Response}}\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{structcurling_1_1Response_ab5c2cd81919f38ca8d295430022da6b6}{httpCode}};\ }
\DoxyCodeLine{00229\ \ \ \ \ std::string\ \mbox{\hyperlink{structcurling_1_1Response_ac2e7c07cc8d32cbf928abefd804d1aa0}{body}};\ }
\DoxyCodeLine{00230\ \ \ \ \ std::map<std::string,\ std::vector<std::string>>\ \mbox{\hyperlink{structcurling_1_1Response_ad36bcbd66306c7625242f31f4fe39c43}{headers}};\ }
\DoxyCodeLine{00231\ \ \ \ \ }
\DoxyCodeLine{00232\ \ \ \ \ std::string\ toString()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ std::ostringstream\ oss;}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ oss\ <<\ \textcolor{stringliteral}{"{}status:\ "{}}\ <<\ \mbox{\hyperlink{structcurling_1_1Response_ab5c2cd81919f38ca8d295430022da6b6}{httpCode}}\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)nbody:\(\backslash\)n"{}}\ <<\ \mbox{\hyperlink{structcurling_1_1Response_ac2e7c07cc8d32cbf928abefd804d1aa0}{body}}\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)nheaders:\(\backslash\)n"{}};}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ h\ :\ \mbox{\hyperlink{structcurling_1_1Response_ad36bcbd66306c7625242f31f4fe39c43}{headers}})\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ oss\ <<\ h.first\ <<\ \textcolor{stringliteral}{"{}:\ "{}};}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ v\ :\ h.second)\ oss\ <<\ v\ <<\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ oss\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ oss.str();}
\DoxyCodeLine{00241\ \ \ \ \ \}}
\DoxyCodeLine{00242\ \ \ \ \ std::vector<std::string>\ getHeader(\textcolor{keyword}{const}\ std::string\&\ key)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ std::string\ lowered\ =\ key;}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ detail::toLowerCase(lowered);}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{structcurling_1_1Response_ad36bcbd66306c7625242f31f4fe39c43}{headers}}.find(lowered);}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (it\ !=\ \mbox{\hyperlink{structcurling_1_1Response_ad36bcbd66306c7625242f31f4fe39c43}{headers}}.end())\ ?\ it-\/>second\ :\ std::vector<std::string>\{\};}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00248\ \};}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00254\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcurling_1_1Request}{Request}}\ \{}
\DoxyCodeLine{00255\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{using\ }ProgressCallback\ =\ std::function<bool(curl\_off\_t\ dltotal,\ curl\_off\_t\ dlnow,}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curl\_off\_t\ ultotal,\ curl\_off\_t\ ulnow)>;}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4}{Method}}\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4a7528035a93ee69cedb1dbddb2f0bfcc8}{GET}},\ \ \ \ }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4aa02439ec229d8be0e74b0c1602392310}{POST}},\ \ \ }
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4a3e75383a5992a6d15fb81e872e46e256}{PUT}},\ \ \ \ }
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4a2bbe23c0e8b3f638f0f5aed4b6864513}{DEL}},\ \ \ \ }
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4a63bc9a3997d66d835d9f3ec29451407d}{PATCH}},\ \ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4ae15e216fc1c639f787b1231ecdfa1bf8}{HEAD}},\ \ \ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4a1903a3443a397660de69904323b54533}{MIME}}\ \ \ \ }
\DoxyCodeLine{00271\ \ \ \ \ \};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{classcurling_1_1Request_aa9d15b103f1f0c3a4679dabbfae2f617}{AuthMethod}}\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ BASIC\ =\ CURLAUTH\_BASIC,}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ NTLM\ =\ CURLAUTH\_NTLM,}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ DIGEST\ =\ CURLAUTH\_DIGEST}
\DoxyCodeLine{00281\ \ \ \ \ \};}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5f}{HttpVersion}}\ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5fa5b39c8b553c821e7cddc6da64b5bd2ee}{DEFAULT}},\ \ \ }
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5fa5f1f9932b84e67c4a4b7e91c03335077}{HTTP\_1\_1}},\ \ }
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5fad1ea3abbe73fec0b8ae7b3454a9430c6}{HTTP\_2}},\ \ \ \ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5fa1ab655a8e2067e2ae97d49e5da3713e6}{HTTP\_3}}\ \ \ \ \ }
\DoxyCodeLine{00301\ \ \ \ \ \};}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00307\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_ac1d45f8843a0ae9170e2d9cb72fb6707}{Request}}();}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00312\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a479fbf06ebab3e4025174a0dfa8d8715}{\string~Request}}()\ noexcept;}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}(\mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\&)\ noexcept;}
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ operator=(\mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\&)\ noexcept;}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}(const\ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&)\ =\ delete;}
\DoxyCodeLine{00318\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ operator=(const\ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&)\ =\ delete;}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00325\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_ac2369ffa37cc3be82117fe43bcc1f53f}{setProgressCallback}}(ProgressCallback\ cb);}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00332\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_ad273252a9c167bb100cdf5fa5ea17d51}{setMethod}}(\mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4}{Method}}\ m);}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00339\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a5c67ebc357b648d588182c3bde1698fa}{setURL}}(const\ std::\textcolor{keywordtype}{string}\&\ url);}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00346\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a67aaf2f1611ea28b8afaf621148daee6}{setProxy}}(const\ std::\textcolor{keywordtype}{string}\&\ url);}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00354\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a511337f3a830b80fde26bbeb79b9f478}{setProxyAuth}}(const\ std::\textcolor{keywordtype}{string}\&\ username,\ const\ std::\textcolor{keywordtype}{string}\&\ password);}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00361\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_aa5df92bd801535ae331def9f6c7317e1}{setProxyAuthMethod}}(\mbox{\hyperlink{classcurling_1_1Request_aa9d15b103f1f0c3a4679dabbfae2f617}{AuthMethod}}\ method);}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00369\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_aca73db2804c9111363a33d10db7ad266}{setHttpAuth}}(const\ std::\textcolor{keywordtype}{string}\&\ username,\ const\ std::\textcolor{keywordtype}{string}\&\ password);}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00376\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_ab2a7ce7acb08c9a2181522901081b0b5}{setHttpAuthMethod}}(\mbox{\hyperlink{classcurling_1_1Request_aa9d15b103f1f0c3a4679dabbfae2f617}{AuthMethod}}\ method);}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00384\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a265188179ecb230db1764fe17e5a16f2}{addArg}}(const\ std::\textcolor{keywordtype}{string}\&\ key,\ const\ std::\textcolor{keywordtype}{string}\&\ value);}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00391\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a8e5214e821656df08a211b12329a1ab5}{addHeader}}(const\ std::\textcolor{keywordtype}{string}\&\ header);}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00398\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_aed0d7b275f303f8b12dfd770bff688e4}{setBody}}(const\ std::\textcolor{keywordtype}{string}\&\ body);}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00405\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a1cb80aa3390df07e6ffc6e57d4d2f340}{downloadToFile}}(const\ std::\textcolor{keywordtype}{string}\&\ path);}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00412\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a40a70b017482439181cb0820d89a6285}{setTimeout}}(\textcolor{keywordtype}{long}\ seconds);}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00419\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a0d8f37450cb261bfc3252057a8fad154}{setConnectTimeout}}(\textcolor{keywordtype}{long}\ seconds);}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00426\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_ac99b12012c16657026d223048e4d7475}{setFollowRedirects}}(\textcolor{keywordtype}{bool}\ follow);}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00433\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_ab3376d99be10172592ac487d9369e437}{setAuthToken}}(const\ std::\textcolor{keywordtype}{string}\&\ token);}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00440\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a8dc52ab73cc53d9207bf784b001715a6}{setCookiePath}}(const\ std::\textcolor{keywordtype}{string}\&\ path);}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00447\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a57bd5429d90254605fcde77d8f338d91}{setUserAgent}}(const\ std::\textcolor{keywordtype}{string}\&\ userAgent);}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00456\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a195f40094e3203f718f5607e95d45312}{addFormField}}(const\ std::\textcolor{keywordtype}{string}\&\ fieldName,\ const\ std::\textcolor{keywordtype}{string}\&\ value);}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00465\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a7c17a7ff6c1a5f720f12a6c717655d92}{addFormFile}}(const\ std::\textcolor{keywordtype}{string}\&\ fieldName,\ const\ std::\textcolor{keywordtype}{string}\&\ filePath);}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00472\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a880e06ab8bb08cb3bd3070fb068499b0}{enableVerbose}}(\textcolor{keywordtype}{bool}\ enabled\ =\ true);}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00479\ \ \ \ \ \mbox{\hyperlink{structcurling_1_1Response}{Response}}\ \mbox{\hyperlink{classcurling_1_1Request_a3fd884b79e47c9ac7cf50c0475f796c4}{send}}();}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcurling_1_1Request_a3bc18c924d8b921944b77ac1947ea29d}{reset}}();}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00489\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_aaa7120aa2b2dc09613a8b462bcbd84b2}{setHttpVersion}}(\mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5f}{HttpVersion}}\ version);}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00496\ \ \ \ \ template<typename\ T>}
\DoxyCodeLine{00497\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request}{Request}}\&\ \mbox{\hyperlink{classcurling_1_1Request_a69aa0b454ecd71e555d7e5dc3d6247b3}{setRawOption}}(CURLoption\ opt,\ T\ value)\ \{}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_pointer<T>::value\ ||\ std::is\_arithmetic<T>::value,}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}setRawOption\ only\ supports\ pointer\ or\ arithmetic\ types"{}});}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ curl\_easy\_setopt(curlHandle.get(),\ opt,\ value);}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00502\ \ \ \ \ \}}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{int}\ detail::ProgressCallbackBridge(\textcolor{keywordtype}{void}*\ clientp,\ curl\_off\_t\ dltotal,\ curl\_off\_t\ dlnow,}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curl\_off\_t\ ultotal,\ curl\_off\_t\ ulnow);}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00509\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a3820b1d0d3943785f8d1b3122e6e15d4}{Method}}\ method;}
\DoxyCodeLine{00510\ \ \ \ \ CurlPtr\ curlHandle;}
\DoxyCodeLine{00511\ \ \ \ \ CurlSlistPtr\ list;\textcolor{comment}{//headers;}}
\DoxyCodeLine{00512\ \ \ \ \ std::string\ url,\ args,\ body,\ cookieFile,\ cookieJar;}
\DoxyCodeLine{00513\ \ \ \ \ CurlMimePtr\ mime;}
\DoxyCodeLine{00514\ \ \ \ \ std::string\ downloadFilePath;}
\DoxyCodeLine{00515\ \ \ \ \ ProgressCallback\ progressCallback;}
\DoxyCodeLine{00516\ \ \ \ \ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5f}{HttpVersion}}\ httpVersion\ =\ \mbox{\hyperlink{classcurling_1_1Request_a7176a85fe8cab5746fd03a57f0e7cb5fa5b39c8b553c821e7cddc6da64b5bd2ee}{HttpVersion::DEFAULT}};}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keywordtype}{void}\ clean()\ noexcept;}
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{keywordtype}{void}\ updateURL();}
\DoxyCodeLine{00520\ \};}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ static\_assert(!std::is\_copy\_constructible\_v<\mbox{\hyperlink{classcurling_1_1Request}{Request}}>\ \&\&\ !std::is\_copy\_assignable\_v<\mbox{\hyperlink{classcurling_1_1Request}{Request}}>,}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}\mbox{\hyperlink{namespacecurling}{curling}}::\mbox{\hyperlink{classcurling_1_1Request}{Request}}\ is\ not\ copyable:\ it\ is\ thread-\/unsafe\ and\ must\ not\ be\ shared\ between\ threads.\ One\ instance\ per\ thread."{});}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ namespace\ detail\{}
\DoxyCodeLine{00526\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ ProgressCallbackBridge(\textcolor{keywordtype}{void}*\ clientp,\ curl\_off\_t\ dltotal,\ curl\_off\_t\ dlnow,}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curl\_off\_t\ ultotal,\ curl\_off\_t\ ulnow)\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keyword}{auto}*\ req\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcurling_1_1Request}{Request}}*\textcolor{keyword}{>}(clientp);}
\DoxyCodeLine{00529\ \ \ \ \ \textcolor{keywordflow}{if}\ (req-\/>progressCallback)\ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ shouldCancel\ =\ req-\/>progressCallback(dltotal,\ dlnow,\ ultotal,\ ulnow);}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ shouldCancel\ ?\ 1\ :\ 0;\ \textcolor{comment}{//\ Returning\ non-\/zero\ aborts\ transfer}}
\DoxyCodeLine{00532\ \ \ \ \ \}}
\DoxyCodeLine{00533\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00534\ \}}
\DoxyCodeLine{00535\ \}\ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \}\ \textcolor{comment}{//\ namespace\ curling}}
\DoxyCodeLine{00538\ }

\end{DoxyCode}
